#partly autogenerated by chat gpt
import sys
import re

def split_outermost_parentheses(s):
    result = []
    n=0
    current_str = ""
    comment=False
 
    for c in s:
        if c == ";":
          comment=True
        if comment and c == "\n":
          comment=False
        if not comment:
          current_str += c
          if c == '(':
            n += 1
          elif c == ')':
            n -= 1
            if n==0:
               result.append(current_str.strip())
               current_str = ""
        
    return result

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: python program.py 'smt_problem'")
    else:
        input_text = sys.argv[1]
    output = split_outermost_parentheses(input_text)
    out_wth_noise = [s for s in output if not s.strip().startswith("(assert") 
			            and not s.strip().startswith("(set-info")
			            and not s.strip().startswith("(exit")]
    for i, substr in enumerate(out_wth_noise):
      print(f"{substr}")
    print("(assert false)")
